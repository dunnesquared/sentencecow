{% extends "layout.html" %}


{% block content %}

  <h1>Original Text</h1>
  <p><pre>{{input_text}}</pre></p>

  <!--Only worth displaying if there's actually sentences to be parsed.-->
  {% if (sentences|length) != 0 %}

        <!--Build highlighted text with pre-tags -->
        <h1>Highlighted Text</h1>
        <p>
            {% for item in highlight_data %}
              {% set start = item[0] %}
              {% set end = item[1] %}
              {% set highlight = item[2] %}
              {% set whitespace = item[3] %}

              <!-- Print any white space characters preceding sentence
                   to preserve formatting of original text.-->
              <pre>{{whitespace}}</pre>

              {% if highlight == true %}
                  <pre class="highlight">{{input_text[start:end]}}</pre>
              {% else %}
                <pre>{{input_text[start:end]}}</pre>
              {% endif %}

            {% endfor %}


        </p>

        <h1>All sentences</h1>

        {% for s in sentences %}
          <p>{{s}} (# words: {{lgcounter.count_words(s)}})</p>
        {% endfor %}

        <h1>Long sentences (word_max = {{max}})</h1>


        {% for ls in long_sentences %}
          <!--<p>{{ls['sentence']}} (# words: {{lgcounter.count_words(ls['sentence'])}})</p>-->
          <p>{{ls['sentence']}} (# words: {{ls['wordcount']}})</p>
        {% endfor %}


        <h1>Not quite right?</h1>
        <p>Sometimes detected sentences are shorter than they actually are,
          especially when quotes and abbreviations are involved. To combine to
          two consecutive too-short sentences, click 'Merge next' on the sentence
          you want to be joined with the one following it.
        </p>

        <form action="leguinncounter" method="POST">

          <!--HTTP is a stateless protocol; need to send this info back, so we
         can redisplay it once the CGI web script is done processing-->
          <input type='hidden' name="max" value={{max}}></input>
          <input type='hidden' name="input_text" value="{{input_text}}"></input>

          <!-- Need to resend the sentence list in case sentences have been
           previously merged: parsing the original text will bring us back give
          us sentences before they were merged.-->
          {% for i in range(sentences|length) %}
            <input type='hidden' name="sent_list[]" value="{{sentences[i]}}"</input>
          {% endfor %}

          <!-- Index of sentence chosen to merge with next-->
          <select name="index">
            {% for i in range(sentences|length) %}
              <option value="{{ i }}">
                {{sentences[i]}} (# words: {{lgcounter.count_words(sentences[i])}})
              </option>
            {% endfor %}
          </select>

          <div>
              <br>
            <input name="submit_button" type="Submit" value="Merge"></input>
          </div>

        </form>

    {% else %}
      <h1>Nothing to process!</h1>
      <p>There are no sentences to process. Either you entered nothing, entered
      only whitespace characters, or wrote a phrase without a sentence-ending
      punctuation mark.</p>

    {% endif %}


<br>
<br>
<a href="http://localhost:5000/leguinncounter">Return to main page</a>


{% endblock %}
